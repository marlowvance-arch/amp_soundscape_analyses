name: ecosound
channels:
  - defaults
  - conda-forge
  - nvidia

dependencies:
  # ---- Core Python ----
  - python=3.10

  # ---- Scientific stack ----
  # Torch 2.5.1 requires numpy < 2.0
  - numpy<2
  - scipy
  - pandas
  - matplotlib
  - numba
  - fftw     # optional, used by some index accelerators

  # ---- Audio stack ----
  - librosa
  - audioread

  # ---- YAML + utilities ----
  - pyyaml
  - pip

  # ---- Installed via conda-forge for stability ----
  - soundfile
  - tqdm

  # ---- These must be installed manually AFTER env creation ----
  #     Do NOT list them as conda deps, or Windows DLL conflicts occur.
  #     Your wrapper handles installation if missing.
  #
  #     pip install torch==2.5.1+cu121 torchaudio==2.5.1+cu121 \
  #         --index-url https://download.pytorch.org/whl/cu121

  - pip:
      # Removed CuPy (broken on Windows unless CUDA toolkit is installed)
      # - cupy-cuda12x

      # Machine learning (installed only if missing â€” handled by wrapper)
      # These lines will NOT auto-install unless explicitly run:
      - h5py
      - resampy
      - scikit-learn
      - seaborn
